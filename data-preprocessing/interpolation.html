<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Interpolation - Data analysis for robotics</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Foreword</div></li><li class="chapter-item expanded "><a href="../introduction/license.html"><strong aria-hidden="true">2.</strong> License</a></li><li class="chapter-item expanded affix "><li class="part-title">Fundamentals</li><li class="chapter-item expanded "><a href="../fundamentals/variable_types.html"><strong aria-hidden="true">3.</strong> Variable types</a></li><li class="chapter-item expanded "><a href="../fundamentals/time.html"><strong aria-hidden="true">4.</strong> Time</a></li><li class="chapter-item expanded "><a href="../fundamentals/geometry.html"><strong aria-hidden="true">5.</strong> Geometry</a></li><li class="chapter-item expanded "><a href="../fundamentals/coordinate_systems.html"><strong aria-hidden="true">6.</strong> Coordinate systems</a></li><li class="chapter-item expanded affix "><li class="part-title">Coordinate Transformations</li><li class="chapter-item expanded "><a href="../transformations/motivation.html"><strong aria-hidden="true">7.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../transformations/transformation-tree.html"><strong aria-hidden="true">8.</strong> Transformation tree</a></li><li class="chapter-item expanded "><a href="../transformations/transformation-matrix.html"><strong aria-hidden="true">9.</strong> Transformation matrix</a></li><li class="chapter-item expanded "><a href="../transformations/rotation.html"><strong aria-hidden="true">10.</strong> Rotation</a></li><li class="chapter-item expanded "><a href="../transformations/time.html"><strong aria-hidden="true">11.</strong> Transformations over time</a></li><li class="chapter-item expanded "><a href="../transformations/implementation.html"><strong aria-hidden="true">12.</strong> Implementation in Python</a></li><li class="chapter-item expanded affix "><li class="part-title">Data Handling</li><li class="chapter-item expanded "><a href="../data-preprocessing/data-representation.html"><strong aria-hidden="true">13.</strong> Data representation</a></li><li class="chapter-item expanded "><a href="../data-preprocessing/interpolation.html" class="active"><strong aria-hidden="true">14.</strong> Interpolation</a></li><li class="chapter-item expanded "><a href="../data-preprocessing/merging.html"><strong aria-hidden="true">15.</strong> Merging datasets</a></li><li class="chapter-item expanded affix "><li class="part-title">Perception</li><li class="chapter-item expanded "><a href="../perception/overview.html"><strong aria-hidden="true">16.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../perception/radar.html"><strong aria-hidden="true">17.</strong> RADAR</a></li><li class="chapter-item expanded "><a href="../perception/lidar.html"><strong aria-hidden="true">18.</strong> LIDAR</a></li><li class="chapter-item expanded "><a href="../perception/sensor_fusion.html"><strong aria-hidden="true">19.</strong> Sensor Fusion</a></li><li class="chapter-item expanded "><a href="../perception/architectures.html"><strong aria-hidden="true">20.</strong> Fusion Architectures</a></li><li class="chapter-item expanded affix "><li class="part-title">Maps and Geography</li><li class="chapter-item expanded "><a href="../maps/fundamentals.html"><strong aria-hidden="true">21.</strong> Fundamentals</a></li><li class="chapter-item expanded "><a href="../maps/gps.html"><strong aria-hidden="true">22.</strong> GPS</a></li><li class="chapter-item expanded "><a href="../maps/projections.html"><strong aria-hidden="true">23.</strong> Projections</a></li><li class="chapter-item expanded "><a href="../maps/spatial_indexing.html"><strong aria-hidden="true">24.</strong> Spatial Indexing</a></li><li class="chapter-item expanded "><a href="../maps/open-street-maps.html"><strong aria-hidden="true">25.</strong> Open Street Maps</a></li><li class="chapter-item expanded affix "><li class="part-title">In-vehicle networks</li><li class="chapter-item expanded "><a href="../in-vehicle-networks/intro.html"><strong aria-hidden="true">26.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../in-vehicle-networks/can_bus.html"><strong aria-hidden="true">27.</strong> Controller Area Network</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Data analysis for robotics</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="interpolation"><a class="header" href="#interpolation">Interpolation</a></h1>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>Interpolation (Latin for <em>inter</em> = between and <em>polire</em> = smoothing) is an essential technique for processing numerical data in the engineering domain. 
Sensor output recorded over time as time-series usually requires interpolation to reduce the data amount, deal with missing values
or as a first step prior to the merge with a another data source.</p>
<p>Mathematically, given a list of \(N\) pairs \( (x_i, f_i) \ \forall i \in 0 \dots N-1 \) (often generated by an unknown function or process \(f(x)\)), 
we are interested in the intermediate values (i..e \( x_* \)) which are not equal to any of \( x_i \). Those values are often referred as <em>query</em> points.
Usually, the list is sorted by \( x \) in ascending manner.</p>
<p><img src="interpolation.svg" alt="interpolation" /></p>
<figcaption><center>
<p><strong>Figure 1</strong>: Interpolation problem visualized.</p>
</center></figcaption>
<p>In case we are interested in values of \( x &lt; x_0 \) or \( x &gt; x_{N-1} \) we talk about <em>extrapolation</em>.</p>
<p>Note, that the argument \( x \) can also be time \( t \), in that case we speak about temporal interpolation. Additionally, in this overview we mainly look at the one-dimensional (1D) case, more details on more dimensions can be found in the section below.</p>
<p>There are multiple approaches to interpolate between known data points, which will be categorized and explained in the following sections.</p>
<h2 id="methods"><a class="header" href="#methods">Methods</a></h2>
<p>Across next section, we will introduce three approach families, the first two are separated by the number of points they use for the approximation of intermediate values. 
The first category are the <em>proximity-based</em> methods, which take one or two sample points into account. 
The second category take more then two points into account and will be called <em>global</em>, because they also consider values outside the close proximity.
The third family is called <em>application-specific</em>, since some applications require a special consideration when dealing with intermediate values.</p>
<h3 id="proximity-based"><a class="header" href="#proximity-based">Proximity-based</a></h3>
<p>The proximity can be defined based on the numerical distance to the sample points (nearest-neighbour), or based on the position wrt to sample points.
The algorithms in the proximity based method family select the value of the nearest point and does not consider the values of neighbouring points at all</p>
<p><img src="interpolation_methods.svg" alt="interpolation_methods" /></p>
<figcaption><center>
<p><strong>Figure 2</strong>: Proximity based interpolation methods. Altered version of <sup class="footnote-reference"><a href="#interpolation_methods_image">1</a></sup> </p>
</center></figcaption>
<h4 id="nearest-neighbour"><a class="header" href="#nearest-neighbour">Nearest-Neighbour</a></h4>
<p>Yielding a piecewise-constant interpolant around a single point. The algorithm is very simple to implement and is commonly used. (https://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)</p>
<h4 id="previousnext"><a class="header" href="#previousnext">Previous/Next</a></h4>
<p>In some applications however, especially those dealing with time-series, taking the nearest sample means taking values in the future, which is not always suited. Therefore variation forward-fill ``ffill` exist, where \( f_i \) is true for all \( x \in [x_i, x_{i+1}[ \). </p>
<p>The opposite, backward-fill, where \( f_{i+1} \) is true for all \( x \in [x_i, x_{i+1}[ \) is often used for XYZ.</p>
<h4 id="linear"><a class="header" href="#linear">Linear</a></h4>
<p>Linear interpolation assumes a linear relationship between two sample points, i.e.</p>
<p>\[
f(x) = ax +b = \frac{f_{i+1}- f_{i}}{x_{i+1}- xf_{i}} + f_{i} \ \forall x \in [x_i, x_{i+1}[
\]</p>
<h3 id="global"><a class="header" href="#global">Global</a></h3>
<p>Global methods take into account more than two points around the query location \( x_* \). Some methods even take into account all available points.</p>
<p><img src="global_interpolation.svg" alt="global_interpolation" /></p>
<figcaption><center>
<p><strong>Figure 3</strong>: Global interpolation methods. Images taken from Wikipedia.</p>
</center></figcaption>
<h4 id="polynomial"><a class="header" href="#polynomial">Polynomial</a></h4>
<p>A \(n\)-degree polynomial \( p(x) = c_n x^n + c_{n-1} x^{n-1} + \dots + c_0 \) is fitted to multiple points around the query \( x_* \). Mathematically, we can use regression techniques to find the coefficients \( c_j \) or compute an exact solution taking \( n+1 \) points.</p>
<h4 id="spline"><a class="header" href="#spline">Spline</a></h4>
<p>Similar to linear interpolation which uses a linear function for each of intervals \( [x_i, x_{i+1}] \), spline interpolation uses low-degree polynomials in each of the intervals, and chooses the polynomial pieces such that they fit smoothly together. The resulting function is called a spline.</p>
<p>The <em>fitting smoothly</em> requirement is ensured via mathematical constrains to the derivatives, such as \( p_i'(x_i) = p_{i+1}'(x_i) \land p_i''(x_i) = p_{i+1}''(x_i)  \) <sup class="footnote-reference"><a href="#spline">2</a></sup></p>
<p>This property can be helpful when interpolating physical quantities, where changes happen smoothly.</p>
<h4 id="regression"><a class="header" href="#regression">Regression</a></h4>
<p>Instead of taking a \(n\)-degree polynomial, we could potentially use any parametrical function and fit the data to it. One interesting method is the <em>Gaussian-Process</em> Regression, an machine learning, where in addition to the interpolated function value \(f_*\) the uncertainty estimate is computed.</p>
<h4 id="aggregation"><a class="header" href="#aggregation">Aggregation</a></h4>
<p>For cases where the array of query points \( x_* \) have lower temporal frequency than the sample points,
i.e. between each query point there are multiple sample points, statistical metrics such as arithmetic mean, median or \(p\)-percentile can be computed.</p>
<p>The following equation computes the average aggregation for query points \( x_* \) with a sampling distance \( S \) between each other.</p>
<p>\[
f_* = avg( x_* ) = \frac 1 N \sum_{x_i \in [x_* - \frac{s}{2}, x_* + \frac{s}{2}]} f_i
\]</p>
<p>The aggregation takes all sample points which fall in the interval \( \pm S \) and takes the average of the function values.</p>
<p>This interpolation technique can have multiple purposes: mean or median can be used for summarizing noisy measurements in timeseries data. Aggregations such as <em>min</em>, <em>max</em> or <em>percentile</em> allow emphasizing on critical values, such as potholes while sampling the road surface.</p>
<h3 id="application-specific"><a class="header" href="#application-specific">Application-specific</a></h3>
<p>For some applications assuming a polynomial or linear function is not enough. For physical systems and noisy data, <em>Kalman Filter</em><sup class="footnote-reference"><a href="#kalman_filter">3</a></sup> can be used for estimating intermediate values. To apply the Kalman filter, we need a mathematical state-space equation system describing the physics behind the temporal dynamics and the relationship to the measurement. This methodology is also called <em>Kalman Smoothing</em><sup class="footnote-reference"><a href="#kalman_smoothing">4</a></sup>.</p>
<p>An alternative, statistical, method is to use Gaussian Process Regression. In addition to the function value \( f_* \) we can compute an uncertainty estimate \( \sigma_* \).</p>
<p>When dealing with transformations between coordinate systems, represented as quaternion, a method called <em>SLERP</em> is used, assuming rotation with uniform angular velocity around a fixed rotation axis.<sup class="footnote-reference"><a href="#slerp">5</a></sup></p>
<h2 id="implementation"><a class="header" href="#implementation">Implementation</a></h2>
<p>A majority of mentioned neighborhood- and global methods are implemented within the <code>pandas.DataFrame.resample</code> functionality.
See <a href="https://pandas.pydata.org/docs/reference/resampling.html#upsampling">here</a> for an overview of available methods.</p>
<p>For some of the methods, such as splines or polynomial interpolation, pandas falls back to <code>scipy</code>'s <code>interpolate</code> functionality.
One of them is <code>scipy.interpolate.interp1d</code> (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html">source</a>).</p>
<h2 id="dimensionality"><a class="header" href="#dimensionality">Dimensionality</a></h2>
<p>WIP</p>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<p><sup class="footnote-reference"><a href="#interpolation_methods_image">1</a></sup> By Cmglee - Own work, CC BY-SA 4.0, <a href="https://commons.wikimedia.org/w/index.php?curid=53064904">link</a></p>
<p><sup class="footnote-reference"><a href="#spline">2</a></sup> <a href="https://en.wikipedia.org/wiki/Spline_interpolation#Introduction">Wikipedia: Spline Interpolation</a></p>
<p><sup class="footnote-reference"><a href="#kalman_filter">3</a></sup> <a href="https://en.wikipedia.org/wiki/Kalman_filter">Wikipedia: Kalman Filter</a></p>
<p><sup class="footnote-reference"><a href="#kalman_smoothing">4</a></sup> <a href="https://en.wikipedia.org/wiki/Kalman_filter#Fixed-lag_smoother">Wikipedia: Kalman Filter - Fixed-lag smoother</a></p>
<p><sup class="footnote-reference"><a href="#slerp">5</a></sup> <a href="https://en.wikipedia.org/wiki/Slerp#Quaternion_Slerp">Wikipedia: Quaternion Slerp</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../data-preprocessing/data-representation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../data-preprocessing/merging.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../data-preprocessing/data-representation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../data-preprocessing/merging.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
