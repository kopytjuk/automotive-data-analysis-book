<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Fundamentals - Data analysis for robotics</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Foreword</div></li><li class="chapter-item expanded "><a href="../introduction/license.html"><strong aria-hidden="true">2.</strong> License</a></li><li class="chapter-item expanded affix "><li class="part-title">Fundamentals</li><li class="chapter-item expanded "><a href="../fundamentals/variable_types.html"><strong aria-hidden="true">3.</strong> Variable types</a></li><li class="chapter-item expanded "><a href="../fundamentals/time.html"><strong aria-hidden="true">4.</strong> Time</a></li><li class="chapter-item expanded "><a href="../fundamentals/geometry.html"><strong aria-hidden="true">5.</strong> Geometry</a></li><li class="chapter-item expanded "><a href="../fundamentals/coordinate_systems.html"><strong aria-hidden="true">6.</strong> Coordinate systems</a></li><li class="chapter-item expanded affix "><li class="part-title">Coordinate Transformations</li><li class="chapter-item expanded "><a href="../transformations/motivation.html"><strong aria-hidden="true">7.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../transformations/transformation-tree.html"><strong aria-hidden="true">8.</strong> Transformation tree</a></li><li class="chapter-item expanded "><a href="../transformations/transformation-matrix.html"><strong aria-hidden="true">9.</strong> Transformation matrix</a></li><li class="chapter-item expanded "><a href="../transformations/rotation.html"><strong aria-hidden="true">10.</strong> Rotation</a></li><li class="chapter-item expanded "><a href="../transformations/time.html"><strong aria-hidden="true">11.</strong> Transformations over time</a></li><li class="chapter-item expanded "><a href="../transformations/implementation.html"><strong aria-hidden="true">12.</strong> Implementation in Python</a></li><li class="chapter-item expanded affix "><li class="part-title">Data Handling</li><li class="chapter-item expanded "><a href="../data-preprocessing/data-representation.html"><strong aria-hidden="true">13.</strong> Data representation</a></li><li class="chapter-item expanded "><a href="../data-preprocessing/interpolation.html"><strong aria-hidden="true">14.</strong> Interpolation</a></li><li class="chapter-item expanded "><a href="../data-preprocessing/merging.html"><strong aria-hidden="true">15.</strong> Merging datasets</a></li><li class="chapter-item expanded affix "><li class="part-title">Perception</li><li class="chapter-item expanded "><a href="../perception/overview.html"><strong aria-hidden="true">16.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../perception/radar.html"><strong aria-hidden="true">17.</strong> RADAR</a></li><li class="chapter-item expanded "><a href="../perception/lidar.html"><strong aria-hidden="true">18.</strong> LIDAR</a></li><li class="chapter-item expanded "><a href="../perception/sensor_fusion.html"><strong aria-hidden="true">19.</strong> Sensor Fusion</a></li><li class="chapter-item expanded "><a href="../perception/architectures.html"><strong aria-hidden="true">20.</strong> Fusion Architectures</a></li><li class="chapter-item expanded affix "><li class="part-title">Maps and Geography</li><li class="chapter-item expanded "><a href="../maps/fundamentals.html" class="active"><strong aria-hidden="true">21.</strong> Fundamentals</a></li><li class="chapter-item expanded "><a href="../maps/gps.html"><strong aria-hidden="true">22.</strong> GPS</a></li><li class="chapter-item expanded "><a href="../maps/projections.html"><strong aria-hidden="true">23.</strong> Projections</a></li><li class="chapter-item expanded "><a href="../maps/spatial_indexing.html"><strong aria-hidden="true">24.</strong> Spatial Indexing</a></li><li class="chapter-item expanded "><a href="../maps/open-street-maps.html"><strong aria-hidden="true">25.</strong> Open Street Maps</a></li><li class="chapter-item expanded affix "><li class="part-title">In-vehicle networks</li><li class="chapter-item expanded "><a href="../in-vehicle-networks/intro.html"><strong aria-hidden="true">26.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../in-vehicle-networks/can_bus.html"><strong aria-hidden="true">27.</strong> Controller Area Network</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Data analysis for robotics</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="fundamentals"><a class="header" href="#fundamentals">Fundamentals</a></h1>
<p>This chapter provides a high level overview about the mathematical description of the Earth.</p>
<h2 id="geographic-coordinates"><a class="header" href="#geographic-coordinates">Geographic coordinates</a></h2>
<p>In order to communicate locations geographic coordinates on our planet, a pair of <strong>latitude</strong> and <strong>longitude</strong> are used (Fig. 1).</p>
<p align="center">
  <img src="geographic-coords-wiki.svg" width="80%"/>
</p>
<figcaption><center>
<p><strong>Figure 1</strong>: Geographic coordinates overview with <span style="color:blue">parallels</span> (blue) and <span style="color:red">meridians</span> (red). The prime meridian (longitude 0°) intersects <a href="https://en.wikipedia.org/wiki/Greenwich">Greenwich, United Kingdom</a>.
Edited Image from: <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system">Wikipedia</a></p>
</center></figcaption>
<p>Note, that the pair of coordinates is usually reported with longitude first in geographic software applications and tools, since east-west looks like an x coordinate.<sup class="footnote-reference"><a href="#maps-book">1</a></sup></p>
<h2 id="geoid"><a class="header" href="#geoid">Geoid</a></h2>
<p>An important concept to understand is that, the Earth's surface is irregular. Its surface can be described
with a <strong>geoid</strong>, defined as the shape of the surface of the earth if it were completely covered with water (Fig. 1).<sup class="footnote-reference"><a href="#maps-book">1</a></sup></p>
<p>The models taught in school, like Earth being a sphere or a ellipsoid (obtained by rotating 
an ellipse about one of its principal axes) are sufficient to explain many 
things like movement of the planets, sunrise, horizon etc.</p>
<p>Fig. 2 shows an exaggerated shape of the Earth with vertical scaling of the heights and lows.</p>
<p align="center">
  <img src="geoid.jpg" width="95%"/>
</p>
<figcaption><center>
<p><strong>Figure 2</strong>: Earth geoid model (Source: <a href="https://enterprise-insights.dji.com/blog/geoid-vs-ellipsoid">DJI</a>)</p>
</center></figcaption>
<p>The study of the Earth’s surface (i.e. geoid) is called <strong>geodesy</strong>.</p>
<p>In order to deal with the complex shape mathematically, <strong>geodetic systems</strong> or <strong>geodetic datums</strong> are introduced.</p>
<h2 id="geodetic-datum"><a class="header" href="#geodetic-datum">Geodetic datum</a></h2>
<p>A geodetic datum is a reference coordinate system, describing the Earth's geoid as a 3-dimensional mathematical shape (e.g. sphere or ellipsoid).</p>
<p>In Wikipedia, it is defined as following<sup class="footnote-reference"><a href="#geodetic-datum-wiki">2</a></sup>:</p>
<blockquote>
<p>A geodetic datum [...] is a reference frame for precisely representing the position of locations on Earth or other planetary bodies by means of geodetic coordinates.</p>
</blockquote>
<p>In Fig. 3 the ellipsoid from the widely used 1984 World Geodetic System (WGS84) is visualized.
The coordinate origin of WGS84 is meant to be located at the Earth's center of mass;
the uncertainty is believed to be less than 2 cm. Modern navigation systems based on GPS use WGS84.<sup class="footnote-reference"><a href="#world-geodetic-system-wiki">3</a></sup></p>
<p align="center">
  <img src="wgs84-wiki.svg" width="40%"/>
</p>
<figcaption><center>
<p><strong>Figure 3</strong>: 1984 World Geodetic System Ellipsoid with Equatorial (a), polar (b) and mean Earth radii.<sup class="footnote-reference"><a href="#geodetic-datum-wiki">2</a></sup></p>
</center></figcaption>
<p>Other satellite navigation systems, such as Galileo (European Union) or GLONASS (Russia)
use other geodetic datums such as  Galileo Terrestrial Reference Frame (GTRF) 
or Parametry Zemli 1990 (Parameters of the Earth 1990) (PZ-90) respectively.<sup class="footnote-reference"><a href="#esa-reference-frames">4</a></sup></p>
<p>In the Fig. 4 the definition of geographic coordinates on a geodetic datum is visualized. Note that the latitude \( \phi \) is defined by the equatorial plane and a line that is normal to the reference ellipsoid. </p>
<p align="center">
  <img src="geodetic_coordinates.svg" width="40%"/>
</p>
<figcaption><center>
<p><strong>Figure 4</strong>: Geodetic coordinates: longitude \( \lambda \), latitude \( \phi \) and altitude \( h \).<sup class="footnote-reference"><a href="#geodetic-coords-wiki">5</a></sup></p>
</center></figcaption>
<p>Contrary to the <em>geodetic</em> latitude (Fig. 4), the <em>geocentric</em> latitude is the angle between the equatorial plane and the radius from the centre to a point of interest. On its own, the term &quot;latitude&quot; normally refers to the geodetic latitude.<sup class="footnote-reference"><a href="#latitude-wiki">6</a></sup></p>
<p>Note, that in some applications and countries, different geodetic datums can be used. For example, cartographers in Europe may use European Datum 1950 (ED50) whereas US-counterparts use North American Datum 1927 (NAD27) which approximates the USA better. See Fig. 5 for a visual explanation.</p>
<p align="center">
  <img src="datums.png" width="40%"/>
</p>
<figcaption><center>
<p><strong>Figure 5</strong>: Depending of the area of interest, different datums may be used. NAD27 approximates the left side of the geoid with a smaller error than ED50. Contrary to that, the right side is better modeled by ED50. <a href="https://www.e-education.psu.edu/geog862/book/export/html/1669">Image source</a></p>
</center></figcaption>
<h2 id="earth-centered-earth-fixed-coordinate-system-ecef"><a class="header" href="#earth-centered-earth-fixed-coordinate-system-ecef">Earth-centered, Earth-fixed coordinate system (ECEF)</a></h2>
<p>As with any spatial reference system, ECEF consists of an abstract coordinate system (in this case, a conventional three-dimensional right-handed system), and a geodetic datum that binds the coordinate system to actual locations on the Earth.<sup class="footnote-reference"><a href="#ecef-wiki">7</a></sup></p>
<p align="center">
  <img src="ecef-wiki.svg" width="80%"/>
</p>
<figcaption><center>
<p><strong>Figure 6</strong>: Earth-centered, Earth-fixed coordinate system together with geodetic coordinates. Image from <sup class="footnote-reference"><a href="#ecef-wiki">7</a></sup></p>
</center></figcaption>
<p>The ECEF coordinate system has the following parameters:</p>
<ul>
<li>The origin at the center of the chosen ellipsoid. In WGS84, this is center of mass of the Earth.</li>
<li>The Z axis is the line between the North and South Poles, with positive values increasing northward.</li>
<li>The X axis is in the plane of the equator, passing through the origin and extending from 180° longitude (negative) to the prime meridian (positive)</li>
<li>The Y axis is also in the plane of the equator, passing through extending from 90°W longitude (negative) to 90°E longitude (positive)</li>
</ul>
<h2 id="conversion-ecef--geodetic"><a class="header" href="#conversion-ecef--geodetic">Conversion ECEF ↔ Geodetic</a></h2>
<p>Given geodetic coordinates (longitude \( \lambda \), latitude \( \phi \) and altitude \( h \)), 
one can compute the metric ECEF coordinates of the point as follows<sup class="footnote-reference"><a href="#geodetic-coords-wiki">5</a></sup>:</p>
<p>\[
X = (N + h) \cos{\phi} \cos{\lambda} \\
Y = (N + h) \cos{\phi}\sin{\lambda} \\
Z = (\frac{b^2}{a^2} N + h) \sin{\phi}
\]</p>
<p>where \( a, b \) are the equatorial radius (semi-major axis) and the polar radius (semi-minor axis), respectively. N is the prime vertical radius of curvature, function of latitude \( \phi \):</p>
<p>\[
N = \frac{a^2}{\sqrt{a^2 \cos^2 \phi + b^2 \sin^2 \phi}}
\]</p>
<p>Those equations are implemented in <code>pyproj</code>:</p>
<pre><code class="language-python">import pyproj

ecef = pyproj.Proj(proj='geocent', ellps='WGS84', datum='WGS84')
lla = pyproj.Proj(proj='latlong', ellps='WGS84', datum='WGS84')

# convert (WGS84 -&gt; ECEF)
x, y, z = pyproj.transform(lla, ecef, lon, lat, alt, radians=False)

# convert (ECEF -&gt; WGS84)
lon, lat, alt = pyproj.transform(ecef, lla, x, y, z, radians=False)
</code></pre>
<h2 id="local-east-north-up-enu-coordinates"><a class="header" href="#local-east-north-up-enu-coordinates">Local east, north, up (ENU) coordinates</a></h2>
<p>In many targeting and tracking applications the local East, North, Up (ENU) Cartesian coordinate system (Fig. 7) is far more intuitive and practical than ECEF or Geodetic coordinates. The local ENU coordinates are formed from a plane tangent to the Earth's surface fixed to a specific location and hence it is sometimes known as a &quot;Local Tangent&quot; or &quot;local geodetic&quot; plane. By convention the east axis is labeled x, the north y and the up z.<sup class="footnote-reference"><a href="#local-tangent-wiki">8</a></sup></p>
<p align="center">
  <img src="enu-wiki.svg" width="50%"/>
</p>
<figcaption><center>
<p><strong>Figure 7</strong>: The east north up (ENU) system together with ECEF and geodetic coordinates.<sup class="footnote-reference"><a href="#ecef-wiki">7</a></sup></p>
</center></figcaption>
<p>In Python, the transformation between geodetic and ENU coordinates is implemented in <code>pymap3d</code> library (<a href="https://geospace-code.github.io/pymap3d/">docs</a>):</p>
<pre><code class="language-python">import pymap3d as pm

# ENU coordinate origin (Zermatt, Switzerland)
lat0 = 46.017 # deg
lon0 = 7.750  # deg
h0 = 1673     # meters

# The point of interest
lat = 45.976  # deg
lon = 7.658   # deg
h = 4531      # meters

# by default uses the ellipsoid from WGS-84
pm.geodetic2enu(lat, lon, h, lat0, lon0, h0)
# returns: (-7134.757195979863, -4556.321513844541, 2852.3904239436915)
</code></pre>
<p>In MATLAB, <code>geodetic2enu</code> function (<a href="https://de.mathworks.com/help/map/ref/geodetic2enu.html">docs</a>) can be used.</p>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<p><sup class="footnote-reference"><a href="#maps-book">1</a></sup> Peter Anthamatten - <em>How to Make Maps, An Introduction to Theory and Practice of Cartography</em> (2021)</p>
<p><sup class="footnote-reference"><a href="#geodetic-datum-wiki">2</a></sup> https://en.wikipedia.org/wiki/Geodetic_datum</p>
<p><sup class="footnote-reference"><a href="#world-geodetic-system-wiki">3</a></sup> Wikipedia - World GeoDetic System https://en.wikipedia.org/wiki/World_Geodetic_System</p>
<p><sup class="footnote-reference"><a href="#esa-reference-frames">4</a></sup> Reference Frames in GNSS https://gssc.esa.int/navipedia/index.php/Reference_Frames_in_GNSS</p>
<p><sup class="footnote-reference"><a href="#geodetic-coords-wiki">5</a></sup> Wikipedia - Geodetic coordinates https://en.wikipedia.org/wiki/Geodetic_coordinates</p>
<p><sup class="footnote-reference"><a href="#latitude-wiki">6</a></sup> Wikipedia - Latitude  https://en.wikipedia.org/wiki/Latitude</p>
<p><sup class="footnote-reference"><a href="#ecef-wiki">7</a></sup> Wikipedia - Earth-centered, Earth-fixed coordinate system https://en.wikipedia.org/wiki/Earth-centered,_Earth-fixed_coordinate_system</p>
<p><sup class="footnote-reference"><a href="#local-tangent-wiki">8</a></sup> Wikipedia - Local tangent plane coordinates https://en.wikipedia.org/wiki/Local_tangent_plane_coordinates</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../perception/architectures.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../maps/gps.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../perception/architectures.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../maps/gps.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
